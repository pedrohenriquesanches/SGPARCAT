<ui:composition template="/templates/pagina.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="titulo">Calendário Paroquial</ui:define>
    <ui:define name="corpo">

        <f:metadata>
            <f:event listener="#{agendaBean.buscar()}" type="preRenderView"/>
        </f:metadata>

        <div class="titulo-opcoes">
            <div class="titulo-pagina">
                <h1>Gestão do Calendário</h1>            
            </div>
            <div class="opcoes-right">
                <p:commandButton value="Criar evento" onclick="PF('dialogo').show();" icon="ui-icon-plus" />
            </div>
        </div>

        <h:form id="tabelaForm">

            <p:messages id="messages" for="messages" showDetail="false" autoUpdate="true" closable="true"/>

            <h:panelGrid style="margin-top: 20px; width: 100%" >

                <p:schedule id="schedule" value="#{agendaBean.listagem}" class="calendario" locale="pt" >

                    <!--                    <p:ajax event="dateSelect" update="dialogForm:painel-evento" oncomplete="PF('dialogo-evento').show();" />
                                        <p:ajax event="eventSelect" update="dialogForm:painel-evento" oncomplete="PF('dialogo-evento').show();" />
                                        <p:ajax event="eventMove" update=":tabelaForm:messages" />
                                        <p:ajax event="eventResize" update=":tabelaForm:messages" />-->

                </p:schedule>

            </h:panelGrid>

        </h:form>
        
        <h:form id="dialogForm">
            
            <p:dialog widgetVar="dialogo" header="Agendamento" visible="false"
                      resizable="false" draggable="false" modal="true">

                <p:ajax event="close" listener="#{registrarContribuicaoBean.limpar}" update="painel-evento"/>

                <h:panelGrid id="painel-evento" columns="2">
                    <p:outputLabel for="title" value="Titles:" />
                    <p:inputText id="title" required="true" />

                    <p:outputLabel for="from" value="From:" />
                    <p:calendar id="from" pattern="dd/MM/yyyy HH:mm" mask="true" navigator="true" locale="pt" />

                    <p:outputLabel for="to" value="To:" />
                    <p:calendar id="to" pattern="dd/MM/yyyy HH:mm" mask="true" navigator="true" locale="pt" />

                    <p:outputLabel for="allDay" value="All Day:" />
                    <h:selectBooleanCheckbox id="allDay" />

                    <p:commandButton value="Salvar" update="painel-evento, :tabelaForm:schedule" />
                </h:panelGrid>

            </p:dialog>

        </h:form>

    </ui:define>

</ui:composition>